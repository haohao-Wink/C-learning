## 多态
多态：对于同一指令，针对不同对象，产生不同行为

多态分类：
1. 静态多态 

> 函数重载、运算符重载、模板

>发生时机在编译的时候

2. 动态多态

>发生在运行的时候，使用虚函数进行体现

### 虚函数

1. 概念：是一个成员函数且在前加virtual关键字
2. 性质：如果在基类中定义类虚函数，那么在派生类中该函数就是虚函数，即使在派生类中没有virtual
3. 重定义：派生类要保证名称和基类相同，返回类型和参数列表也要相同（参数个数、类型、顺序）

### **虚函数原理**

1. 当基类定义了虚函数，就会在该类创建的对象的存储布局前，新增一个虚函数指针，该指针指向虚函数表；虚表中存放虚函数的入口地址（有多少虚函数就有多少虚表）
2. 当派生类继承基类时，会满足吸收特点，也即派生类也会有该虚函数，所以派生类创建的对象布局前，也会新增虚函数指针，指向派生类自己的虚函数
3. 如果派生类重写，虚函数会用派生类自己的入口地址覆盖基类吸收的入口地址

### 虚函数机制被激活的条件（动态多态激活条件）
1. 基类定义虚函数

>前提条件

2. 派生类重写（重定义、覆盖）虚函数

>否则体现不出多态

3. 创建派生类的对象

>没有对象就不存在布局，找不到虚函数指针

4. 基类的指针指向（引用绑定）派生类的对象

>无法调用派生类对象

5. 使用基类的指针（引用）调用该虚函数

>调用虚函数
**五个条件缺一不可**

### 虚函数的限制
#### 哪些函数不能设置为虚函数
1. 普通函数（自由函数、全局函数）

>虚函数必须是成员函数

2. 内联成员函数

>内联函数在编译时进行替换；虚函数在运行时体现多态

>如果将内联函数设置为虚函数，将会失去内联含义

3. 静态成员函数

>静态成员函数在编译时进行发生，虚函数在运行时体现多态

>静态成员函数是共享的，一个类被所有类共享

>没有this指针

4. 构造函数

>构造函数不能被继承，虚函数可以被继承

>构造函数发生时机在编译时，虚函数体现动态多态，发生时机在运行时

>要体现多态就要放在虚表，需要使用虚函数找到虚表；如果不调用构造函数，就没有对象的创建，也就没有虚函数指针

5. 友元函数

>如果友元函数本身是普通函数，那么友元函数不能设置为虚函数;

>如果友元函数是另外一个类的成员函数，可以被设置为虚函数

>友元关系不能被继承

### 虚函数的访问
1. 使用指针和引用可以体现出动态多态、
2. 使用对象不能体现动态多态，体现的是虚函数作为普通函数的特征
3. 使用其他普通成员函数，有可能体现动态多态
4. 使用构造函数与析构函数不能体现动态多态

### 三个重要概念
1. 重载：在同一作用域中，函数的名字相同，但是参数列表不一样（包括参数个数、参数类型、参数顺序）
2. 重定义（重写、覆盖）：发生在基类与派生类中，必须是虚函数，函数名字和参数列表相同
3. 隐藏：发生在基类和派生类中，派生类中的函数和基类中的函数名称相同;派生类中的数据成员也可以隐藏基类中的同名数据成员